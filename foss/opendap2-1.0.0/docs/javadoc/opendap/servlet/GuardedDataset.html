<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_33) on Tue Aug 14 11:44:48 PDT 2012 -->
<TITLE>
GuardedDataset
</TITLE>

<META NAME="date" CONTENT="2012-08-14">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="GuardedDataset";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GuardedDataset.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../opendap/servlet/GetInfoHandler.html" title="class in opendap.servlet"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../opendap/servlet/MimeUtil.html" title="class in opendap.servlet"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?opendap/servlet/GuardedDataset.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GuardedDataset.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
opendap.servlet</FONT>
<BR>
Interface GuardedDataset</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../opendap/servers/test/testDataset.html" title="class in opendap.servers.test">testDataset</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>GuardedDataset</B></DL>
</PRE>

<P>
A GuardedDataset allows us to handle multithreaded stateful processing.
 <p/>
 In a multi-threaded environment such as a Servlet, multiple requests for the
 same dataset may happen at the same time. This is a problem only when there is
 some state that is being maintained. Caching strategies (eg the netcdf server
 caches open netcdf files) may need to maintain state information in order to manage
 resources efficiently.
 <p/>
 All accesses to the DDS and DAS are made through the GuardedDataset.
 Typically the server puts a mutex lock on the resource when getDDS() or getDAS()
 is called. When the dataset processing is complete, release() is called, and
 the server releases the mutex.
 <p/>
 Example use:
 <p/>
 <pre><code>
 public void doGetDAS(HttpServletRequest request,
 HttpServletResponse response,
 ReqState rs)
 throws IOException, ServletException {
 <p/>
 response.setContentType("text/plain");
 response.setHeader("XDODS-Server",  getServerVersion() );
 response.setHeader("Content-Description", "dods-dds");
 OutputStream Out = new BufferedOutputStream(response.getOutputStream());
 <p/>
 GuardedDataset ds = null;
 try {
 ds = getDataset(rs);
 DAS myDAS = ds.getDAS();            // server would lock here
 myDAS.print(Out);
 response.setStatus(response.SC_OK);
 }
 catch (DAP2Exception de){
 dap2ExceptionHandler(de,response);
 }
 catch (ParseException pe) {
 parseExceptionHandler(pe,response);
 }
 finally {                           // release lock if needed
 if (ds != null) ds.release();
 }
 }
 </code></pre>
 <p/>
 Its important that the DDS or DAS not be used after release() is called.
 <p/>
 See opendap.servers.netcdf.NcDataset for example of implementing a locking
 GuardedDataset.
 If a server is not keeping state, it can simply pass the DDS and DAS without locking,
 and implement a dummy release() method.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>jcaron</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../opendap/dap/DAS.html" title="class in opendap.dap">DAS</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../opendap/servlet/GuardedDataset.html#getDAS()">getDAS</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the DAS for this Dataset.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../opendap/dap/Server/ServerDDS.html" title="class in opendap.dap.Server">ServerDDS</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../opendap/servlet/GuardedDataset.html#getDDS()">getDDS</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the DDS for this Dataset.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../opendap/servlet/GuardedDataset.html#release()">release</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release the lock, if any, on this dataset.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getDDS()"><!-- --></A><H3>
getDDS</H3>
<PRE>
<A HREF="../../opendap/dap/Server/ServerDDS.html" title="class in opendap.dap.Server">ServerDDS</A> <B>getDDS</B>()
                 throws <A HREF="../../opendap/dap/DAP2Exception.html" title="class in opendap.dap">DAP2Exception</A>,
                        <A HREF="../../opendap/dap/parser/ParseException.html" title="class in opendap.dap.parser">ParseException</A></PRE>
<DL>
<DD>Get the DDS for this Dataset.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the ServerDDS
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../opendap/dap/DAP2Exception.html" title="class in opendap.dap">DAP2Exception</A></CODE>
<DD><CODE><A HREF="../../opendap/dap/parser/ParseException.html" title="class in opendap.dap.parser">ParseException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getDAS()"><!-- --></A><H3>
getDAS</H3>
<PRE>
<A HREF="../../opendap/dap/DAS.html" title="class in opendap.dap">DAS</A> <B>getDAS</B>()
           throws <A HREF="../../opendap/dap/DAP2Exception.html" title="class in opendap.dap">DAP2Exception</A>,
                  <A HREF="../../opendap/dap/parser/ParseException.html" title="class in opendap.dap.parser">ParseException</A></PRE>
<DL>
<DD>Get the DAS for this Dataset.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the DAS
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../opendap/dap/DAP2Exception.html" title="class in opendap.dap">DAP2Exception</A></CODE>
<DD><CODE><A HREF="../../opendap/dap/parser/ParseException.html" title="class in opendap.dap.parser">ParseException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="release()"><!-- --></A><H3>
release</H3>
<PRE>
void <B>release</B>()</PRE>
<DL>
<DD>Release the lock, if any, on this dataset.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GuardedDataset.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../opendap/servlet/GetInfoHandler.html" title="class in opendap.servlet"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../opendap/servlet/MimeUtil.html" title="class in opendap.servlet"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?opendap/servlet/GuardedDataset.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GuardedDataset.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
