<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>Developer Information</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
<h1 align="center"><img src="images/opendap-logo.gif" align="absmiddle"></h1>
<h1 align="center">Java Software</h1>
<h2 align="center">Developers Information</h2>




<hr /><!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<h2>Building the code</h2>

<p>Building the Java-OPeNDAP software should be very simple.</p>
<ol>
    <li>Go get and install the current J2SE and ANT (<a href="#DEPENDS">see below</a>)</li>
    <li>If you haven't got it already, get the source code distribution from
        <a href="http://www.opendap.org/">OPeNDAP</a>.</li>
    <li>Unpack the source code distribution (tar -xvf DistributionFileName.jar)</li>
    <li>Enter the top level directory (Java-OPeNDAP)</li>
    <li>Run the command &quot;ant compile&quot;</li>
</ol>

<p>This will compile all of the distributed software, but nothing more. For more detailed information you should
    read (and try to understand) the ANT build.xml file. For those of you using an IDE you will have to follow
    your own &quot;path&quot; to get this going.</p>

<p>If you are trying to fix a parser bug you better <a href="#PARSERS">read the Parsers section at the bottom of this document</a>.

<hr /><!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<h2><a name="DEPENDS"></a>Dependencies</h2>

<h3>Java Virtual Machine</h3>
<p><a href="http://www.oracle.com/technetwork/java/javase/overview/index.html/"><strong>Java 2 Standard Edition (J2SE)</strong></a></p>

<p><em><strong>Minimum</strong></em><strong>:</strong> Java 1.5<br>
    <em><strong>Recommended</strong></em><strong>:</strong> Java 1.6.x</p>

<p>This software was developed and tested against the 1.6.0 release of the J2SE</p>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<h3>3rd Party Libraries Required by the DAP2 Software</h3>

<p>The core software depends on several third part libraries. All of these are
    included with the distribution (in the lib directory). These (should) be the ones that the code
    was compiled against for development and testing purposes. </p>

<ul>
    <li> <strong>JDOM</strong> package, version 1.0, available from <a href="http://www.jdom.org">jdom.org</a></li>
    <li> <strong>Apache HttpComponents HTTP Client</strong> package, version 3.1, available from <a href="http://hc.apache.org">hc.apache.org</a></li>
    <li> <strong>Apache Commons Codec</strong> package, version 1.3, available from <a href="http://commons.apache.org">commons.apache.org</a></li>
    <li> <strong>Apache Commons Logging</strong> package, version 1.1, available from <a href="http://commons.apache.org">commons.apache.org</a> </li>
    <li> <strong>Apache MIME for java</strong> package, version 0.6, available from <a href="http://james.apache.org/mime4j/">james.apache.org</a> </li>
    <li> <strong>Apache Xerces XML Parser</strong> package, version 2.9.0, available from <a href="http://xerces.apache.org/">xerces.apache.org</a> </li>


    <li> <strong>JUnit test harness</strong> package, version 4.4.0, available from <a href="http://www.junit.org/">junit.org</a> </li>
    <li> <strong>Servlet API Implementation</strong> package, plucked from Tomcat 5.5.20 <a href="http://tomcat.apache.org/tomcat-5.5-doc">tomcat.apache.org</a> and 
    included because someimplmentation of the Servlet API is required in order to compile the server componets.</li>
</ul>

<p>It is possibly (in fact likely) that newer versions of these libraries are available from the
    various development teams that create these products. <em> Replace them at your
    own risk.</em></p>
    
<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->

<p><strong><a href="http://tomcat.apache.org"><span size="+1">Apache Tomcat</span></a></strong></p>

<p><em><strong>Minimum</strong></em><strong>:</strong> 4.1.18<br>
    <em><strong>Recommended</strong></em><strong>:</strong> 6.0.29 </p>

<p><strong>Note</strong>: This code has not been tested against version 7 of Tomcat!</p>

<p>The servlets were developed and tested using Tomcat 5.5.20. In particular,
    the code was linked against the servlet.jar bundled with this particular version
    of Tomcat. This is not (to the best
    of my knowledge) a library that is included with the standard Java distributions.</p>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->

<p><strong><a href="http://ant.apache.org/"><span size="+1">ANT</span></a></strong></p>

<p><em><strong>Minimum</strong></em><strong>: </strong>1.5.2 (<a href="#ANTWARNING">Warning!</a>)<br>
    <em><strong>Recommended</strong></em><strong>:</strong> 1.6 or higher</p>

<p>This software now builds entirely with ANT. If you haven't already got ANT,
    then <a href="http://ant.apache.org/">go get it</a>. You need it. There is a master build file in the top level
    directory which contains all of the various production rules for the software.</p>

<p><em><strong>Compiling the source:</strong></em> This should be straight forward.
    Just go to the top level directory and type &quot;ant compile&quot;. For more
    detailed instructions you should read the master build file, <em>build.xml</em>.

<hr /><!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<hr /><!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<hr /><!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<h2><a name="PARSERS"></a>Parsers (Optional)</h2>

<p>Currently the DAP2 parsers are implemented as grammers written in/for YACC, along with some written in/for JavaCC. You don't NEED to be able to compile the parsers in order to build the software. All of the java files that are generated by YACC and JavaCC are checked into the system and unless you have specific needs to alter the parsers (like in order to fix a bug) then I strongly recommend that you just leave them alone. <em>Really.</em></p>

<h3>Compiling the parsers:</h3> 
Make sure that you have fulfilled the <a href="#PARSERDEPENDS">software dependancies listed below</a>. The following sections describe how to 
<ul>
    <li><a href="#JavaCCGrammars">Build the JavaCC based parsers from their source (*.jj) files.</a></li>
    <li><a href="#YaccGrammars">Build the YACC based parsers from their source (*.yc?) files.</a></li>
</ul>

<h4><a name="YaccGrammars"></a>YACC Grammars</h4>

<br />
<br />
<p><em><strong>Here we will describe how to build the parsers whose grammars are written in YACC.</strong></em></p>
<br />
<br />



<h4><a name="JavaCCGrammars"></a>JavaCC Grammars</h4>

The <em>parsers</em> target in the top level <em>build.xml</em> file uses the &lt;javacc&gt; task
    build the parsers whose grammars are written for JavaCC. The javacc task requires that the local 
    installation of JavaCC be identified
    as an attribute. In order to build the parser you will need to create a separate properties file
    (that is <strong>not</strong> checked into SVN). This file must be called <em>javacc-config</em>
    and it must live in the top level <em>Java-OPeNDAP</em> directory. The content of the <em>javacc-config</em> file
    must be the property <em>JavaCC.home</em> and its value should be set to the
    top level directory of the JavaCC distribution on your development system.</p>

<p>Here is an example of the content of the <em>javacc-config </em>file:</p>

<pre>
    JavaCC.home=/usr/local/javacc
</pre>

Once you have created the <em>javacc-config</em> then the <em>parsers</em>
target in <em>Java-OPeNDAP/buildfiles/opendap.xml </em>should work, at least
within the constraints of the <a href="#ANTWARNING">Warning</a>.


<p><strong><em><a name="ANTWARNING"></a>Warning</em></strong>: <span size="-1">There
    exists a version conflict between some versions of ANT and some versions
    of JavaCC. If you have JavaCC 2.1 or 2.0 then the parsers should compile
    fine, no matter what version of ANT you have. However, if you are using JavaCC
    3.0 or newer (released after the JavaCC project migrated from WebGain to Java.Net)
    older versions of ANT will fail to correctly identify the JavaCC libraries. The
    mail and bug archives indicate that the problem was fixed as of 5/26/2003,
    but the patch won't migrate into a release until version 1.6.
    You can grab a nightly build of Ant release 1.6beta as work around until 1.6
    hits the street. Good luck.</span></p>







<h3><a name="PARSERDEPENDS"></a>Parser Dependencies</h3>


<p><strong><a href="http://javacc.java.net"><span size="+1">JavaCC</span></a></strong></p>

<p><em><strong>Minimum</strong></em><strong>:</strong> Optional (Only required if you plan on working on the
    constraint expression parser.)
    <br>
    <em><strong>Recommended</strong></em><strong>:</strong> 2.1 or higher. (<a href="#ANTWARNING">Warning!</a>)</p>

<p>Javacc takes a grammar file and produces a Java source code file from it.
    All of these resulting Java source files are checked into the SVN tree, so
    unless you anticipate working on the grammar files themselves you will not
    need to get Javacc. Most of the OPeNDAP parsers rely on the <strong>yacc</strong> tool
    to build. The constraint expression parser is built from a grammar file with a .jj extension. The
    grammar contains the rules for both the scanner and the parser (and thus encapsulate both the functionalities
    of <strong>lex</strong> and <strong>yacc</strong>). If you are going to work on the parsers you should :</p>
<ol>
    <li>Contact us first: <a href="mailto:support@opendap.org">Support</a></li>
    <li>Read the ANT section below on how to compile the parsers.</li>
</ol>


<hr>

<p>&nbsp;</p>

<p>&nbsp;</p>
</body>
</html>
